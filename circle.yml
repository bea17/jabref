machine:
  java:
    version: oraclejdk8

dependencies:
  pre:
    - scripts/prepare-install4j.sh
    - install4j6/bin/install4jc --verbose --license=$INSTALL4J_KEY
  override:
    - TERM=dumb ./gradlew dependencies
  cache_directories:
    - "~/.install4j"
    - "~/downloads"

test:
  override:
    - TERM=dumb ./gradlew test
  post:
    - TERM=dumb ./gradlew -Pdev=true -Pinstall4jDir="install4j6" release --stacktrace

general:
  artifacts:
    - "build/releases"
