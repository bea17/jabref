machine:
  java:
    version: oraclejdk8

dependencies:
  pre:
    - wget http://download-aws.ej-technologies.com/install4j/install4j_unix_6_0_4.tar.gz
    - tar -zxvf install4j_unix_6_0_4.tar.gz
    - install4j6/bin/install4jc --verbose --license=$INSTALL4J_KEY
  override:
    - TERM=dumb ./gradlew dependencies

test:
  override:
    - TERM=dumb ./gradlew test
  post:
    - TERM=dumb export PATH=$PATH:`pwd`/launch4j && ./gradlew -Pdev=true -PnsisExec="install4j6/bin/install4j" release --stacktrace

general:
  artifacts:
    - "build/releases"
